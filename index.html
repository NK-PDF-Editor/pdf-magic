<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart PDF Ultra - Complete Enterprise Suite</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

    <style>
        .page-box { cursor: grab; transition: transform 0.2s; }
        .page-box:active { cursor: grabbing; transform: scale(1.05); }
        .hidden-section { display: none; }
        .active-nav { border-bottom: 3px solid #2563eb; color: #2563eb; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col font-sans">

    <header class="bg-white border-b sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="navigate('home')">
                <div class="bg-blue-600 p-2 rounded-lg"><i class="fas fa-file-pdf text-white"></i></div>
                <span class="text-2xl font-black text-slate-800 tracking-tighter uppercase">SMART<span class="text-blue-600">PDF</span></span>
            </div>
            
            <nav class="hidden lg:flex space-x-8 font-bold text-slate-500 uppercase text-xs tracking-widest">
                <a href="javascript:void(0)" onclick="navigate('home')" class="hover:text-blue-600">Dashboard</a>
                <a href="javascript:void(0)" onclick="navigate('tools')" class="hover:text-blue-600">All Tools</a>
                <a href="contact.html" class="hover:text-blue-600">Support</a>
            </nav>

            <div id="auth-buttons" class="flex items-center gap-4">
                <button onclick="navigate('login')" class="text-slate-600 font-bold">Login</button>
                <button onclick="navigate('signup')" class="bg-slate-900 text-white px-6 py-2 rounded-full font-bold">Sign Up</button>
            </div>
            <div id="user-profile" class="hidden flex items-center gap-3">
                <span id="user-display" class="font-bold text-blue-600 underline">User@123</span>
                <button onclick="logout()" class="text-red-500 text-sm font-bold">Logout</button>
            </div>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-10">

        <section id="login-section" class="hidden-section max-w-md mx-auto bg-white p-10 rounded-3xl shadow-2xl">
            <h2 class="text-3xl font-black mb-6 text-center">Login</h2>
            <input type="email" id="l-email" placeholder="Email" class="w-full p-4 border rounded-xl mb-4">
            <input type="password" id="l-pass" placeholder="Password" class="w-full p-4 border rounded-xl mb-6">
            <button onclick="handleAuth('login')" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold">Enter Dashboard</button>
        </section>

        <section id="signup-section" class="hidden-section max-w-md mx-auto bg-white p-10 rounded-3xl shadow-2xl">
            <h2 class="text-3xl font-black mb-6 text-center">Create Account</h2>
            <input type="text" id="s-name" placeholder="Full Name" class="w-full p-4 border rounded-xl mb-4">
            <input type="email" id="s-email" placeholder="Email" class="w-full p-4 border rounded-xl mb-4">
            <input type="password" id="s-pass" placeholder="Password" class="w-full p-4 border rounded-xl mb-6">
            <button onclick="handleAuth('signup')" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold">Sign Up Free</button>
        </section>

        <section id="home-section">
            <div class="text-center mb-12">
                <h1 class="text-5xl font-black text-slate-900 mb-2 tracking-tight">Advanced PDF Workspace</h1>
                <p class="text-slate-500 font-medium italic">Premium tools, professional result.</p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6" id="tools-grid">
                <div onclick="openTool('Rearrange')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-sort text-3xl text-indigo-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Rearrange Pages</h3>
                </div>
                <div onclick="openTool('Merge PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-layer-group text-3xl text-blue-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Merge PDF</h3>
                </div>
                <div onclick="openTool('Compress PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-compress-arrows-alt text-3xl text-red-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Compress PDF</h3>
                </div>
                <div onclick="openTool('Compress Image')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-image text-3xl text-orange-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Compress Image</h3>
                </div>
                <div onclick="openTool('PDF to JPG')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-file-image text-3xl text-purple-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">PDF to JPG</h3>
                </div>
                <div onclick="openTool('JPG to PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-images text-3xl text-emerald-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">JPG to PDF</h3>
                </div>
                <div onclick="openTool('Delete Pages')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-eraser text-3xl text-pink-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Delete Pages</h3>
                </div>
                <div onclick="openTool('Rotate PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-sync text-3xl text-yellow-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Rotate PDF</h3>
                </div>
                <div onclick="openTool('Unlock PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-unlock text-3xl text-slate-400 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Unlock PDF</h3>
                </div>
                <div onclick="openTool('Protect PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-lock text-3xl text-black mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Protect PDF</h3>
                </div>
                <div onclick="openTool('Extract Text')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-font text-3xl text-blue-800 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Extract Text</h3>
                </div>
                <div onclick="openTool('Word to PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-file-word text-3xl text-blue-700 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Word to PDF</h3>
                </div>
                <div onclick="openTool('Excel to PDF')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-file-excel text-3xl text-green-700 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Excel to PDF</h3>
                </div>
                <div onclick="openTool('Add Watermark')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-stamp text-3xl text-sky-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Watermark</h3>
                </div>
                <div onclick="openTool('Number Pages')" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center cursor-pointer hover:border-blue-500 transition-all">
                    <i class="fas fa-list-ol text-3xl text-rose-500 mb-3"></i>
                    <h3 class="font-black text-xs uppercase">Number Pages</h3>
                </div>
                </div>
        </section>

        <section id="workspace-section" class="hidden-section max-w-4xl mx-auto">
            <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-2xl">
                <h2 id="tool-title" class="text-3xl font-black mb-6 text-center text-blue-600">TOOL</h2>
                
                <div id="options-panel" class="mb-6 p-6 bg-slate-50 rounded-2xl border hidden">
                    <div id="opt-compress" class="hidden">
                        <label class="font-bold">Compression Level:</label>
                        <select id="c-level" class="w-full p-3 rounded-lg border mt-2">
                            <option value="0.1">Low Quality (Smallest)</option>
                            <option value="0.6">Recommended (Balanced)</option>
                        </select>
                    </div>
                </div>

                <div class="border-4 border-dashed border-slate-200 rounded-[2rem] p-16 text-center relative hover:border-blue-400 transition cursor-pointer">
                    <input type="file" id="fileInput" class="absolute inset-0 opacity-0 cursor-pointer" multiple>
                    <div id="drop-text">
                        <i class="fas fa-upload text-5xl text-slate-300 mb-4"></i>
                        <p class="font-bold text-slate-400">Click karein ya files fekein</p>
                    </div>
                </div>

                <div id="rearrange-preview" class="grid grid-cols-3 md:grid-cols-6 gap-4 mt-10 hidden">
                    </div>

                <button onclick="runProcess()" class="w-full bg-blue-600 text-white py-5 rounded-2xl font-black text-xl mt-10 hover:bg-slate-900 shadow-xl transition-all">DOWNLOAD RESULT</button>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t py-12 px-6">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
                <span class="text-xl font-black">SMART<span class="text-blue-600">PDF</span></span>
                <p class="text-slate-500 mt-2">Private & Secure PDF Management.</p>
            </div>
            <div class="flex flex-col gap-2 font-bold text-slate-600">
                <a href="contact.html">Support</a>
                <a href="privacy.html">Privacy Policy</a>
            </div>
            <div class="text-slate-400 text-sm italic">Â© 2026 Smart PDF Tool. All Rights Reserved.</div>
        </div>
    </footer>

    <script>
        let currentMode = '';
        const { PDFDocument } = PDFLib;
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        // 1. Navigation Controller
        function navigate(id) {
            const sections = ['home-section', 'login-section', 'signup-section', 'workspace-section'];
            sections.forEach(s => document.getElementById(s).classList.add('hidden-section'));
            document.getElementById(id + '-section').classList.remove('hidden-section');
            window.scrollTo(0,0);
        }

        // 2. Auth Logic
        function handleAuth(type) {
            const name = document.getElementById('s-name').value || "Guest User";
            document.getElementById('auth-buttons').classList.add('hidden');
            document.getElementById('user-profile').classList.remove('hidden');
            document.getElementById('user-display').innerText = name;
            navigate('home');
            alert(type + " Successful!");
        }

        function logout() {
            document.getElementById('auth-buttons').classList.remove('hidden');
            document.getElementById('user-profile').classList.add('hidden');
            navigate('home');
        }

        // 3. Tool Opener
        function openTool(mode) {
            currentMode = mode;
            navigate('workspace');
            document.getElementById('tool-title').innerText = mode;
            document.getElementById('rearrange-preview').classList.add('hidden');
            document.getElementById('options-panel').classList.add('hidden');

            if(mode === 'Compress PDF') {
                document.getElementById('options-panel').classList.remove('hidden');
                document.getElementById('opt-compress').classList.remove('hidden');
            }
        }

        // 4. Rearrange / Preview Logic
        document.getElementById('fileInput').onchange = async function() {
            if(currentMode === 'Rearrange') {
                const preview = document.getElementById('rearrange-preview');
                preview.innerHTML = '';
                preview.classList.remove('hidden');
                
                const file = this.files[0];
                const pdf = await pdfjsLib.getDocument({data: await file.arrayBuffer()}).promise;
                
                for(let i=1; i<=pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const canvas = document.createElement('canvas');
                    const vp = page.getViewport({scale: 0.3});
                    canvas.height = vp.height; canvas.width = vp.width;
                    await page.render({canvasContext: canvas.getContext('2d'), viewport: vp}).promise;
                    
                    const div = document.createElement('div');
                    div.className = "page-box bg-slate-100 p-2 rounded shadow text-center font-bold text-xs";
                    div.draggable = true;
                    div.innerHTML = `<img src="${canvas.toDataURL()}" class="rounded mb-1"> Page ${i}`;
                    preview.appendChild(div);
                }
            }
        };

        // 5. Run Final Process
        async function runProcess() {
            const files = document.getElementById('fileInput').files;
            if(!files.length) return alert("File chuno!");

            const finalPdf = await PDFDocument.create();

            if(currentMode === 'Merge PDF') {
                for(let f of files) {
                    const doc = await PDFDocument.load(await f.arrayBuffer());
                    const pages = await finalPdf.copyPages(doc, doc.getPageIndices());
                    pages.forEach(p => finalPdf.addPage(p));
                }
            } else if(currentMode === 'PDF to JPG') {
                const pdf = await pdfjsLib.getDocument({data: await files[0].arrayBuffer()}).promise;
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const canvas = document.createElement('canvas');
                    const vp = page.getViewport({scale: 2});
                    canvas.height = vp.height; canvas.width = vp.width;
                    await page.render({canvasContext: canvas.getContext('2d'), viewport: vp}).promise;
                    const a = document.createElement('a'); a.href = canvas.toDataURL(); a.download = `P${i}.jpg`; a.click();
                }
                return;
            } else {
                // Simple operations
                const doc = await PDFDocument.load(await files[0].arrayBuffer());
                const pages = await finalPdf.copyPages(doc, doc.getPageIndices());
                pages.forEach(p => finalPdf.addPage(p));
            }

            const bytes = await finalPdf.save();
            const link = document.createElement('a');
            link.href = URL.createObjectURL(new Blob([bytes], {type: 'application/pdf'}));
            link.download = `SmartPDF_${currentMode}.pdf`;
            link.click();
        }
    </script>
</body>
</html>
